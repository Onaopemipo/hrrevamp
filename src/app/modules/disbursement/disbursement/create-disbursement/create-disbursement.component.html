<ngx-componentsheader
  pageName="Disbursement"
  [requiredButton]="[]"
></ngx-componentsheader>
<div class="main-page-container">
  <nb-tabset (changeTab)="selectTab($event)">
    <nb-tab tabTitle="Single Disbursement" [tabId]="TABS.SINGLE">
      <!-- Tab content 1 -->
        <div class="form-group row">
          <div class="col-sm-2 col-md-2 col-lg-2">
            <label>Channel</label>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <select
            class="form-control"
            placeholder="Select Channel" name="channel" #channel="ngModel" [(ngModel)]="disbursement.channelId"
          >
          <option value="1" *ngFor="let channel of allChannels">Option 1</option>
        </select>
          </div>
        </div>

            <div class="form-group row">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Disburse for</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <nb-radio-group name="disburse_for" (ngModelChange)="changeDisburse($event)">
                  <nb-radio value="1">Budget Item</nb-radio>
                  <nb-radio value="2">Project</nb-radio>
                </nb-radio-group>
              </div>
            </div>

            <div *ngIf="budgetItem" class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Budget Item</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <select class="form-control" name="bugetItem" #budgetItem="ngModel" [(ngModel)]="disbursement.disbursementBudgetItemId" placeholder="Select"></select>
                <option *ngFor="let item of allBudgetItems" value=item.code>{{item.name}}</option>
              </div>
              <div *ngIf="budgetItem.invalid && (budgetItem.dirty || budgetItem.touched)" class="error">
                <div *ngIf="budgetItem.errors.required">Budget Item is required</div>
              </div>
            </div>

            <div *ngIf="!budgetItem" class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Project</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <select class="form-control" name="projectItem" #projectItem="ngModel" [(ngModel)]="disbursement.projectId" placeholder="Select"></select>
                <option value="1">Select Project Item</option>
              </div>
              <div *ngIf="projectItem.invalid && (projectItem.dirty || projectItem.touched)" class="error">
                <div *ngIf="projectItem.errors.required">Project Item is required</div>
              </div>
            </div>


            <div class="form-group row">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Recipient</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <nb-radio-group name="recipient" (ngModelChange)="changeRecipient($event)">
                  <nb-radio value="1">New account</nb-radio>
                  <nb-radio value="2">Existing Beneficiary</nb-radio>
                  <nb-radio value="3">Employee</nb-radio>
                </nb-radio-group>
              </div>
            </div>

            <div *ngIf="recipient == 2" class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Beneficiary</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <select class="form-control" name="beneficiary" #beneficiary="ngModel" [(ngModel)]="disbursement.beneficiary_id" placeholder="Select Bank"></select>
              </div>
              <div *ngIf="beneficiary.invalid && (beneficiary.dirty || beneficiary.touched)" class="error">
                <div *ngIf="beneficiary.errors.required">Project Item is required</div>
              </div>
            </div>

            <div *ngIf="recipient ==3" class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Select Employee</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <ngx-employee-master-search></ngx-employee-master-search>
              </div>
            </div>

            <div *ngIf="recipient ==1">
              <div class="form-group row" style="margin-top: 20px">
                <div class="col-sm-2 col-md-2 col-lg-2">
                  <label>Bank Name</label>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <select class="form-control" name="bankName" #bankName="ngModel" [(ngModel)]="disbursement.bankId" placeholder="Select Bank">
                    <option value=""></option>
                  </select>
                </div>
              </div>

              <div class="form-group row" style="margin-top: 20px">
                <div class="col-sm-2 col-md-2 col-lg-2">
                  <label>Account Number</label>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <input type="number" class="form-control" name="accountNo" minlength="10" maxlength="10" #accountNo="ngModel" [(ngModel)]="disbursement.accountNumber" placeholder="Enter account number" required>
                </div>
              </div>

              <div class="form-group row" style="margin-top: 20px">
                <div class="col-sm-2 col-md-2 col-lg-2">
                  <label>Account Name</label>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <input type="text" class="form-control" name="accountName" #accountName="ngModel" [(ngModel)]="disbursement.accountName" placeholder="Select Bank">
                </div>
              </div>

            </div>

            <div class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Amount</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <app-amount-input [(value)]="disbursement.amount"></app-amount-input>
              </div>
            </div>

            <div class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Scheduled Date</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <ngx-date [(ngModel)]="disbursement.scheduledDate"></ngx-date>
              </div>
            </div>

            <div class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Description/purpose</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <ngx-wysisyg-input style="padding-left: -10px;" [(ngModel)]="disbursement.description"></ngx-wysisyg-input>
              </div>

            </div>

            <div class="form-group row">
              <div class="col-sm-2 col-md-2 col-lg-2"></div>
              <div class="col-sm-6 col-md-6 col-lg-6" >
                <nb-checkbox *ngIf="recipient ==1" status="basic" [(ngModel)]="disbursement.save_as_beneficiary">Save as Beneficiary</nb-checkbox>&nbsp;&nbsp;
                <nb-checkbox status="basic" (checkedChange)="toggle($event)">Recurring</nb-checkbox>
              </div>
            </div>

            <div *ngIf="recurrence == true">
              <div class="form-group row" style="margin-top: 20px">
                <div class="col-sm-2 col-md-2 col-lg-2">
                  <label>Frequency</label>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <select class="form-control" name="frequency" #frequency="ngModel" [(ngModel)]="disbursement.frequencyId" placeholder="Frequency"></select>
                </div>

              </div>
              <div class="form-group row" style="margin-top: 20px">
                <div class="col-sm-2 col-md-2 col-lg-2">
                  <label>Start Date</label>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <ngx-date [max]="disbursement.endDate" [value]="disbursement.startDate"></ngx-date>
                </div>
              </div>
              <div class="form-group row" style="margin-top: 20px">
                <div class="col-sm-2 col-md-2 col-lg-2">
                  <label>End Date</label>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <ngx-date  [min]="disbursement.startDate" [value]="disbursement.endDate"></ngx-date>
                </div>
              </div>
            </div>

          <div class="form-group row" style="margin-top: 20px">
            <div class="col-sm-2 col-md-2 col-lg-2">
              <label></label>
            </div>
            <div class="col-sm-6 col-md-6 col-lg-6">
              <button nbButton status="primary">Submit</button>
            </div>
          </div>
    </nb-tab>
    <nb-tab tabTitle="Bulk Disbursement" [tabId]="TABS.BULK">
      <!-- Tab content 2 -->
      <div class="my-form">
        <div class="form-group row">
          <div class="col-sm-2 col-md-2 col-lg-2">
            <label>Channel</label>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <select
            class="form-control"
            placeholder="Select Channel" name="channel" #channel="ngModel" [(ngModel)]="disbursement.channelId"
          ></select>
          </div>
        </div>

            <div class="form-group row">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Beneficiary list</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <ngx-file-upload></ngx-file-upload>
              </div>
            </div>


            <div class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Scheduled Date</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <ngx-date></ngx-date>
              </div>
            </div>


            <div class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label>Description/purpose</label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <ngx-wysisyg-input style="padding-left: -10px;" [(ngModel)]="disbursement.description"></ngx-wysisyg-input>
              </div>
            </div>


              <div class="form-group row">
                <div class="col-sm-2 col-md-2 col-lg-2"></div>
                <div class="col-sm-6 col-md-6 col-lg-6" >
                  <nb-checkbox status="basic" [(ngModel)]="disbursement.saveAsBeneficiary">Save as Beneficiary</nb-checkbox>&nbsp;&nbsp;
                  <nb-checkbox status="basic" [(ngModel)]="disbursement.isRecurring" (checkedChange)="toggle($event)">Recurring</nb-checkbox>
                </div>
              </div>

              <div *ngIf="recurrence == true">
                <div class="form-group row" style="margin-top: 20px">
                  <div class="col-sm-2 col-md-2 col-lg-2">
                    <label>Frequency</label>
                  </div>
                  <div class="col-sm-6 col-md-6 col-lg-6">
                    <select class="form-control" name="frequency" #frequency="ngModel" [(ngModel)]="disbursement.frequency" placeholder="Frequency"></select>
                  </div>

                </div>
                <div class="form-group row" style="margin-top: 20px">
                  <div class="col-sm-2 col-md-2 col-lg-2">
                    <label>Start Date</label>
                  </div>
                  <div class="col-sm-6 col-md-6 col-lg-6">
                    <ngx-date [max]="disbursement.endDate" [value]="disbursement.startDate"></ngx-date>
                  </div>
                </div>
                <div class="form-group row" style="margin-top: 20px">
                  <div class="col-sm-2 col-md-2 col-lg-2">
                    <label>End Date</label>
                  </div>
                  <div class="col-sm-6 col-md-6 col-lg-6">
                    <ngx-date  [min]="disbursement.startDate" [value]="disbursement.endDate"></ngx-date>
                  </div>
                </div>
              </div>

            <div class="form-group row" style="margin-top: 20px">
              <div class="col-sm-2 col-md-2 col-lg-2">
                <label></label>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6">
                <button nbButton status="primary">Submit</button>
              </div>
            </div>
          </div>
    </nb-tab>
  </nb-tabset>
</div>
